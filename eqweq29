-- Load Spawner
local Spawner = loadstring(game:HttpGet("https://codeberg.org/GrowAFilipino/GrowAGarden/raw/branch/main/Spawner.lua"))()

-- Fetch Supported Pets, Seeds, and Eggs
local supportedPets = Spawner.GetPets() -- Returns a table of supported pets
local supportedSeeds = Spawner.GetSeeds() -- Returns a table of supported seeds
local supportedEggs = Spawner.GetEggs() -- Returns a table of supported eggs

-- Window Initialization
local window = Rayfield:CreateWindow({
    Name = "Rin Scripts v4 âš¡", 
    LoadingTitle = "Loading...",
    LoadingSubtitle = "Please wait",
    BackgroundColor = Color3.fromRGB(15, 15, 25),
    Size = UDim2.new(0, 500, 0, 400)
})

-- Tab Setup for Rayfield
local tabPet = window:CreateTab("Pet ðŸ¦–", 4483362458)  
local tabSeed = window:CreateTab("Seed ðŸŒ¿", 4483362459)
local tabEgg = window:CreateTab("Egg ðŸ¥š", 4483362460)
local tabSpin = window:CreateTab("Spin ðŸŽ°", 4483362461)

-- Pet Tab UI Elements
tabPet:AddTextbox({
    Name = "Pet Name",
    Default = "",
    TextDisappear = true,
    Callback = function(name)
        petNameInput.Text = name
    end
})

tabPet:AddDropdown({
    Name = "Select Pet",
    Options = supportedPets, -- Populate with supported pets
    Callback = function(petName)
        petNameInput.Text = petName
    end
})

tabPet:AddTextbox({
    Name = "Mutation",
    Default = "",
    TextDisappear = true,
    Callback = function(mutation)
        mutationInput.Text = mutation
    end
})

tabPet:AddTextbox({
    Name = "Age",
    Default = "",
    TextDisappear = true,
    Callback = function(age)
        ageInput.Text = age
    end
})

tabPet:AddTextbox({
    Name = "Weight (KG)",
    Default = "",
    TextDisappear = true,
    Callback = function(weight)
        weightInput.Text = weight
    end
})

tabPet:AddButton({
    Name = "âš¡ Spawn Pet",
    Callback = function()
        local name = petNameInput.Text
        local mutation = mutationInput.Text
        local age = tonumber(ageInput.Text)
        local weight = tonumber(weightInput.Text)

        if name ~= "" and age and weight then
            if mutation ~= "" then
                name = mutation .. " " .. name
            end
            Spawner.SpawnPet(name, weight, age, mutation)
        else
            showNotification("Please fill all fields with valid data.")
        end
    end
})

-- Seed Tab UI Elements
tabSeed:AddDropdown({
    Name = "Select Seed",
    Options = supportedSeeds, -- Populate with supported seeds
    Callback = function(seedName)
        seedInput.Text = seedName
    end
})

tabSeed:AddButton({
    Name = "Spawn Seed",
    Callback = function()
        if seedInput.Text ~= "" then
            Spawner.SpawnSeed(seedInput.Text)
        else
            showNotification("Please enter a valid Seed Name.")
        end
    end
})

-- Egg Tab UI Elements
tabEgg:AddDropdown({
    Name = "Select Egg",
    Options = supportedEggs, -- Populate with supported eggs
    Callback = function(eggName)
        eggInput.Text = eggName
    end
})

tabEgg:AddButton({
    Name = "Spawn Egg",
    Callback = function()
        if eggInput.Text ~= "" then
            Spawner.SpawnEgg(eggInput.Text)
        else
            showNotification("Please enter a valid Egg Name.")
        end
    end
})

-- Spin Tab UI Elements
tabSpin:AddTextbox({
    Name = "Spin Name",
    Default = "",
    TextDisappear = true,
    Callback = function(spinName)
        spinInput.Text = spinName
    end
})

tabSpin:AddButton({
    Name = "Spin",
    Callback = function()
        if spinInput.Text ~= "" then
            Spawner.Spin(spinInput.Text)
        else
            showNotification("Please enter a valid Spin Name.")
        end
    end
})

-- Minimize and Close Buttons
window:CreateButton({
    Name = "Minimize",
    Callback = function()
        window:Minimize()
    end
})

window:CreateButton({
    Name = "Close",
    Callback = function()
        window:Destroy()
    end
})

-- Helper to show Notifications
local function showNotification(msg)
    game.StarterGui:SetCore("SendNotification", {
        Title = "Spawner",
        Text = msg,
        Duration = 3
    })
end

-- Initialize the UI with default values
Spawner.Load()  -- Calls the Load function for the default UI setup
